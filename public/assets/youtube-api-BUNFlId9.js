const c=[27,28,29,26,25,24,22,20,15,10,1],l={"Computer Science":["programming","coding","software","computer","algorithm","data structure","web development","javascript","python","java","react","node.js","database","machine learning","artificial intelligence","cybersecurity","networking"],Mathematics:["math","mathematics","algebra","calculus","geometry","statistics","probability","linear algebra","differential equations","number theory","analysis"],Physics:["physics","mechanics","thermodynamics","electromagnetism","quantum","relativity","optics","nuclear","particle","astronomy","cosmology"],Chemistry:["chemistry","organic","inorganic","biochemistry","analytical","physical chemistry","molecular","reaction","compound","element","molecule"],Biology:["biology","cell","genetics","evolution","ecology","microbiology","anatomy","physiology","biochemistry","molecular biology","neuroscience"],Engineering:["engineering","mechanical","electrical","civil","chemical","aerospace","biomedical","structural","robotics","automation","control systems"],Medicine:["medicine","medical","health","anatomy","physiology","pathology","pharmacology","surgery","diagnosis","treatment","disease","patient"],Business:["business","management","marketing","finance","economics","entrepreneurship","strategy","leadership","accounting","investment","startup"],History:["history","historical","ancient","medieval","modern","world war","civilization","empire","revolution","archaeology","anthropology"],Literature:["literature","poetry","novel","fiction","classic","author","writing","analysis","criticism","rhetoric","composition"],Psychology:["psychology","mental health","behavior","cognitive","social psychology","neuroscience","therapy","counseling","personality","development"],Philosophy:["philosophy","ethics","logic","metaphysics","epistemology","philosopher","argument","reasoning","critical thinking","moral","existential"]};function d(t){if(!t)return null;const n=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\n?#]+)/,/youtube\.com\/v\/([^&\n?#]+)/,/youtube\.com\/watch\?.*v=([^&\n?#]+)/];for(const s of n){const e=t.match(s);if(e&&e[1])return e[1]}return null}async function u(t,n){var s,e;if(!n)return console.log("No API key provided, using fallback classification"),null;try{const o=await fetch(`https://www.googleapis.com/youtube/v3/videos?part=snippet,statistics&id=${t}&key=${n}`);if(!o.ok)throw new Error(`YouTube API error: ${o.status}`);const a=await o.json();if(a.items&&a.items.length>0){const i=a.items[0];return{title:i.snippet.title,description:i.snippet.description,categoryId:i.snippet.categoryId,categoryName:y(i.snippet.categoryId),channelTitle:i.snippet.channelTitle,tags:i.snippet.tags||[],viewCount:(s=i.statistics)==null?void 0:s.viewCount,likeCount:(e=i.statistics)==null?void 0:e.likeCount}}return null}catch(o){return console.error("Error fetching video info:",o),null}}function y(t){return{1:"Film & Animation",2:"Autos & Vehicles",10:"Music",15:"Pets & Animals",17:"Sports",19:"Travel & Events",20:"Gaming",22:"People & Blogs",23:"Comedy",24:"Entertainment",25:"News & Politics",26:"Howto & Style",27:"Education",28:"Science & Technology",29:"Nonprofits & Activism"}[t]||"Unknown"}function m(t){return c.includes(parseInt(t))}function g(t,n){var o;if(!t||!n)return!1;const s=l[n];if(!s)return!1;const e=`${t.title} ${t.description||""} ${((o=t.tags)==null?void 0:o.join(" "))||""}`.toLowerCase();return s.some(a=>e.includes(a.toLowerCase()))}async function p(t,n,s){try{console.log(`Classifying video ${t} for study area: ${n}`);const e=await u(t,s);if(!e)return{videoInfo:{title:"Unknown Video",categoryName:"Unknown",categoryId:0},isEducationalCategory:!1,isRelatedToStudyArea:!1,recommendedClassification:"unknown",confidence:.5};const o=m(e.categoryId),a=g(e,n);let i="unknown",r=.5;return o&&a?(i="study",r=.9):o&&!a?(i="study",r=.7):!o&&!a?(i="fun",r=.8):(i="unknown",r=.5),console.log("Classification result:",{title:e.title,category:e.categoryName,isEducational:o,isRelated:a,recommendedClassification:i,confidence:r}),{videoInfo:e,isEducationalCategory:o,isRelatedToStudyArea:a,recommendedClassification:i,confidence:r}}catch(e){return console.error("Error classifying video:",e),{videoInfo:{title:"Error classifying video",categoryName:"Unknown",categoryId:0},isEducationalCategory:!1,isRelatedToStudyArea:!1,recommendedClassification:"unknown",confidence:0}}}export{p as c,d as e};
